RootNode:
    BaseClass: System.Windows.Forms.UserControl
    UtilObjectClass: TFrmPetraEditUtils
    Namespace: Ict.Petra.Client.MPartner.Gui   
    UsingNamespaces: [Ict.Petra.Shared.MPartner.Partner.Data,Ict.Petra.Shared.MPartner.Partner.Validation]
    DatasetType: Ict.Petra.Shared.MPartner.Partner.Data.PartnerEditTDS
    DetailTable: PPartnerAttribute
    FormType: edit
    Template: controlMaintainTable
    Actions:
        actNew: {Label=&New, ActionClick=NewRecord}
        actDelete: {Label=&Delete, ActionClick=DeleteRecord}
        actPromote: {ActionClick=ContactTypePromote, Image: MoveDownArrow.ico}
        actDemote: {ActionClick=ContactTypeDemote, Image: MoveUpArrow.ico}
        actLaunchHyperlinkPrefEMail: {ActionClick=LaunchHyperlinkPrefEMail, Image: Email.ico}
        actLaunchHyperlinkEMailWithinOrg: {ActionClick=LaunchHyperlinkEMailWithinOrg, Image: Email.ico}

    Controls:
        pnlContent:
            Controls: [grpOverallContactSettings, grpContactDetails]
            Dock: Fill

        grpOverallContactSettings:
            Controls: [pnlOverallLeft, pnlOverallRight]        
            ControlsOrientation: horizontal
            Dock: Top
        pnlOverallLeft:
            Controls:
                Row0: [cmbPrimaryWayOfContacting]
                Row1: [cmbPrimaryPhoneForContacting]
                Row2: [cmbPrimaryEMail, btnLaunchHyperlinkPrefEMail]
        pnlOverallRight:
            Controls: [grpWithinTheOrganisation]
            Height: 90
        grpWithinTheOrganisation:
            Controls:
                Row1: [cmbPhoneWithinTheOrganisation]
                Row2: [cmbEMailWithinTheOrganisation, btnLaunchHyperlinkEMailWithinOrg]
            Margin: 0,16,0,0
            Height: 70
        cmbPrimaryWayOfContacting: {Label=Primary Contact Method, OptionalValues=Phone, E-Mail, Letter, Skype, SocialNetwork, Width=147, Validation=true}
        cmbPrimaryPhoneForContacting: {Label=Primary Phone, List=UserDefinedList, ComboBoxWidth=182, Width=182, ColSpan=2, Validation=true}
        cmbPhoneWithinTheOrganisation: {Label=Office Phone, List=UserDefinedList, ComboBoxWidth=182, Width=182, ColSpan=2, Validation=true}
        cmbPrimaryEMail: {Label=Primary E-Mail, List=UserDefinedList, ComboBoxWidth=147, Width=147, Validation=true}
        cmbEMailWithinTheOrganisation: {Label=Office E-Mail, List=UserDefinedList, ComboBoxWidth=147, Width=147, Validation=true}
        btnLaunchHyperlinkPrefEMail: {NoLabel=true, Width=15}
        btnLaunchHyperlinkEMailWithinOrg: {NoLabel=true, Width=15}
       
        grpContactDetails:
            Controls: [grpFilter, pnlEditing]
            Dock: Fill

        grpFilter:
            Controls: [chkValidContactDetailsOnly]
            Dock: Top

        chkValidContactDetailsOnly: {CheckBoxAttachedLabel=Left, OnChange=FilterCriteriaChanged}

        pnlEditing:
            Controls: [pnlGrid, pnlDetails]
            Dock: Fill
            Padding: 0,5,0,0
        
        pnlGrid:
            Dock: Fill
            Controls: [grdDetails, pnlButtons]

        pnlButtons:
            Dock: Right
            Controls: [btnNew, btnDelete, pnlPromoteDemote]
        btnNew: {Stretch=horizontally}
            Action: actNew
        btnDelete: {Stretch=horizontally}
            Action: actDelete
        pnlPromoteDemote:
            Controls: [btnDemote, btnPromote]
            Margin: 0,0,0,0
            Padding: 0,5,0,0
        btnPromote: {NoLabel=true, Width=15}
        btnDemote: {NoLabel=true, Width=15}
            
        grdDetails:
            Dock: Fill
            TableName: PPartnerAttributeType
            Columns: [AttributeType, Value, Comment, Current, Confidential]
            CustomColumns:
                AttributeType: {Label=Contact Type}
                Value: {Label=Value}
                Comment: {Label=Comments}
                Current: {Label=Current?, Type=Boolean}
                Confidential: {Label=Confidential?, Type=Boolean}
            # NOTE: These columns get discarded and replaced with more and 'calculated' Columns in ManualCode (Method 'CreateGridColumns')!
            ActionFocusRow: FocusedRowChanged

        pnlDetails:
            Dock: Bottom
            Controls:
                Row0: [cmbContactCategory, cmbContactType, chkSpecialised]
                Row1: [txtValue, txtComment]
                Row2: [pnlCurrentGrouping, chkConfidential]
            Height: 87

        cmbContactCategory: {List=PartnerAttributeCategoryList, ComboBoxWidth=290, Width=290, Validation=true}
        cmbContactType: {List=PartnerAttributeTypeList, ComboBoxWidth=150, Width=150, DataField=PPartnerAttribute.AttributeType, Validation=true}
        chkSpecialised: 
           Label: Business
           Validation: true   # only to cause data to be updated on-the-fly...
        txtValue:
            Label: Value
            Width: 290
            Type: Hyperlink
            LinkType: http
        txtComment: {Label=Comment, Width=245, ColSpan=2, DataField=PPartnerAttribute.Comment}

        pnlCurrentGrouping:
            ControlsOrientation: horizontal
            Controls: [chkCurrent, dtpNoLongerCurrentFrom]
            Padding: 52,0,0,0
        chkCurrent:
            OnChange: EnableDisableNoLongerCurrentFromDate
        dtpNoLongerCurrentFrom:
            Validation: true
            Enabled: false

        chkConfidential: