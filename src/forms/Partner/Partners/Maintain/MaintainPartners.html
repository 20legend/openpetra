<h2>{caption}</h2>

<!-- Phantom Storage -->
<div phantom hidden>

	<div class="tpl_row" onclick="open_detail(this)">
		<div class="row">
			<div class="col">{val_p_partner_key_n}</div>
			<div class="col">{val_p_partner_short_name_c}</div>
		</div>
		<div class="row">
			<div class="col">
				<div class="collapse_col"></div>
			</div>
		</div>
	</div>

	<div class="collapse tpl_view">
		<div class="container" style="background:#e0e0e0;">
			<div class="row">
				<div class="col">{partnerkey}</div><div class="col">{val_p_partner_key_n}</div>
			</div>
			<div class="row">
				<div class="col">{partnername}</div><div class="col">{val_p_partner_short_name_c}</div>
			</div>
			<div class="row">
				<div class="col">{partnerclass}</div><div class="col">{val_p_partner_class_c}</div>
			</div>
			<div class="row">
				<div class="col">{streetname}</div><div class="col">{val_p_street_name_c}</div>
			</div>
			<div class="row">
				<div class="col">{city}</div><div class="col">{val_p_postal_code_c} {val_p_city_c}</div>
			</div>
		</div>
		<button class="btn" onclick="$(this).closest('.collapse').collapse('hide')">{forms.close}</button>
		<button class="btn btn-primary" onclick="open_edit('{val_p_partner_key_n}')">{forms.edit}</button>
	</div>

	<div class="modal tpl_edit openpetra_modal">
		<h3>{edittitle}</h3>
		<div class="container">

			<div class="row">
				<div class="col-3">
					<span>{partnerkey}</span>
				</div>
				<div class="col-3">
					<input type="text" name="p_partner_key_n" readonly/>
				</div>
				<div class="col-3">
					<span>{partnerclass}</span>
				</div>
				<div class="col-3">
					<input type="text" name="p_partner_class_c" readonly/>
				</div>
			</div>

			<div class="row">
				<div class="col-3">
					<span>{forms.status}</span>
				</div>
				<div class="col-3">
					<input type="text" name="p_status_code_c"/>
				</div>
			</div>
			<hr>

			<div class="row FAMILY select_case">
				<div class="col-3">
					<span>{firstname}</span>
				</div>
				<div class="col-3">
					<input type="text" name="PFamily_p_first_name_c"/>
				</div>
				<div class="col-3">
					<span>{familyname}</span>
				</div>
				<div class="col-3">
					<input type="text" name="PFamily_p_family_name_c"/>
				</div>
			</div>

			<div class="row FAMILY select_case">
				<div class="col-3">
					<span>{title}</span>
				</div>
				<div class="col-3">
					<input type="text" name="PFamily_p_title_c"/>
				</div>
			</div>

			<div class="row PERSON select_case">
				<div class="col-3">
					<span>{firstname}</span>
				</div>
				<div class="col-3">
					<input type="text" name="PPerson_p_first_name_c"/>
				</div>
				<div class="col-3">
					<span>{familyname}</span>
				</div>
				<div class="col-3">
					<input type="text" name="PPerson_p_family_name_c"/>
				</div>
			</div>

			<div class="row PERSON select_case">
				<div class="col-3">
					<span>{gender}</span>
				</div>
				<div class="col-3">
					<input type="text" name="p_gender_c"/>
				</div>
				<div class="col-3">
					<span>{dateofbirth}</span>
				</div>
				<div class="col-3">
					<input type="text" name="p_date_of_birth_d"/>
				</div>
			</div>

			<div class="row PERSON select_case">
				<div class="col-3">
					<span>{title}</span>
				</div>
				<div class="col-3">
					<input type="text" name="PPerson_p_title_c"/>
				</div>
			</div>

			<div class="row ORGANISATION select_case">
				<div class="col-3">
					<span>{forms.name}</span>
				</div>
				<div class="col-3">
					<input type="text" name="p_organisation_name_c"/>
				</div>
			</div>

			<div class="row UNIT select_case">
				<div class="col-3">
					<span>{forms.name}</span>
				</div>
				<div class="col-3">
					<input type="text" name="p_unit_name_c"/>
				</div>
			</div>

			<div class="row UNIT select_case">
				<div class="col-3">
					<span>{forms.description}</span>
				</div>
				<div class="col-3">
					<input type="text" name="PUnit_p_description_c"/>
				</div>
			</div>

			<div class="row BANK select_case">
				<div class="col-3">
					<span>{forms.name}</span>
				</div>
				<div class="col-3">
					<input type="text" name="p_branch_name_c"/>
				</div>
			</div>

			<ul class="nav nav-tabs" id="detailTab" role="tablist">
				<li class="nav-item">
					<a class="nav-link active" href="#addresses" aria-controls="addresses" onclick="show_tab(this)">{addresses}</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="#subscriptions" aria-controls="subscriptions" onclick="show_tab(this)">{subscriptions}</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="#types" aria-controls="types" onclick="show_tab(this)">{types}</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="#comment" aria-controls="comment" onclick="show_tab(this)">{comment}</a>
				</li>
			</ul>

			<div class="tab-content" id="edit_modal_tabs">
				<div class="tab-pane active" id="addresses">
					<div class="container">

						<div class="row">
							<div class="col">
								<span>{streetname}</span>
							</div>
							<div class="col">
								<input type="text" name="p_street_name_c" />
							</div>
						</div>

						<div class="row">
							<div class="col">
								<span>{city}</span>
							</div>
							<div class="col">
								<input type="text" name="p_city_c"/>
							</div>
						</div>

						<div class="row">
							<div class="col">
								<span>{postalcode}</span>
							</div>
							<div class="col">
								<input type="text" name="p_postal_code_c"/>
							</div>
						</div>

					</div>
				</div>
				<div class="tab-pane" id="subscriptions">
					TODO {subscriptions}
				</div>
				<div class="tab-pane" id="types">
					TODO {types}
				</div>
				<div class="tab-pane text-center" id="comment">
					<textarea name="PPartner_p_comment_c" style="width:90%;height:7em;" placeholder="{comment}"></textarea>
				</div>
			</div>

			<button class="float-right btn btn-primary" onclick="save_entry(this)">{forms.save}</button>
			<button class="float-right btn" onclick="$(this).closest('.modal').modal('hide')">{forms.close}</button>

		</div>
	</div>

</div>

<table id="toolbar">
	<tr>
		<td>
			<button class="btn btn-primary">{forms.new}</button>
			<button class="btn" onclick="$('#tabfilter').collapse('toggle')">{forms.filter}</button>
		</td>
	</tr>
</table>

<div id="modal_space"></div>

<div class="container collapse" id="tabfilter">
	<div class="row">
		<div class="col">
			<span>{partnername}:</span>
		</div>
		<div class="col">
			<input type="text" name="AFamilyNameOrOrganisation"/>
		</div>
	</div>

	<div class="row">
		<div class="col">
			<span>{city}:</span>
		</div>
		<div class="col">
			<input type="text" name="ACity"/>
		</div>
	</div>

	<div class="row">
		<div class="col">
			<span>{partnerclass}:</span>
		</div>
		<div class="col">
			<select name="APartnerClass">
				<option value="" selected>{forms.any}</option>
				<option value="PERSON">{PERSON}</option>
				<option value="FAMILY">{FAMILY}</option>
				<option value="ORGANISATION">{ORGANISATION}</option>
				<option value="UNIT">{UNIT}</option>
				<option value="BANK">{BANK}</option>
			</select>
		</div>
	</div>

	<input type="hidden" name="AMaxRecords" value="25"/>
</div>

<div class="container" id="browse">
	<div class="row">
		<div class="col"><b>{partnerkey}</b></div>
		<div class="col"><b>{partnername}</b></div>
	</div>

	<div id="browse_container">

	</div>

</div>

<script src="/src/lib/utils.js" charset="utf-8"></script>
<script src="/src/lib/tpl.js" charset="utf-8"></script>
